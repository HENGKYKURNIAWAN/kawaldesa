<div ng-controller="ADDAllocationCtrl as recapitulationCtrl" ng-if="indexCtrl.type == 'add' && indexCtrl.region.Type < 4">
    <div class="content-header">
        Alokasi Dana Desa (ADD) dari APBD
    </div>

    <div class="table-responsive">
        <table class="table table-condensed table-responsive table-bordered">
            <thead>
                <tr ng-if="indexCtrl.region.Type < 2">
                    <th style="vertical-align: middle;">{{indexCtrl.childName}}</th>
                    <th class="money" style="vertical-align: middle; width: 8.3333%;">Dana Perimbangan</th>
                    <th class="money" style="vertical-align: middle; width: 8.3333%;">Dana Alokasi Khusus</th>
                    <th class="money" style="vertical-align: middle; width: 8.3333%;">Dana Perimbangan - Dana Alokasi Khusus</th>
                    <th class="money" style="vertical-align: middle; width: 8.3333%;">Total ADD</th>
                    <th class="money" style="vertical-align: middle; width: 8.3333%;">% Total ADD / (Dana Perimbangan - Dana Alokasi Khusus)</th>
                    <th class="money" style="vertical-align: middle; width: 8.3333%;">Jumlah Desa</th>
                    <th class="money" style="vertical-align: middle; width: 8.3333%;">Rata-rata ADD per Desa</th>
                </tr>
                <tr ng-if="indexCtrl.region.Type >= 2">
                    <th style="vertical-align: middle;" rowspan="3">{{indexCtrl.childName}}</th>
                    <th style="vertical-align: middle;" class="money" rowspan="3">Alokasi Dasar</th>
                    <th colspan="14" style="text-align: center;">Alokasi Berdasarkan Formula</th>
                    <th style="vertical-align: middle;" class="money" rowspan="3" class="money" >Pagu ADD</th>
                </tr>
                <tr ng-if="indexCtrl.region.Type >= 2">
                    <th style="text-align: center" colspan="3">Penduduk</th>
                    <th style="text-align: center" colspan="3">Penduduk Miskin</th>
                    <th style="text-align: center" colspan="3">Wilayah</th>
                    <th style="text-align: center" colspan="3">IKG</th>
                    <th class="money" rowspan="2">Total Bobot</th>
                    <th class="money" rowspan="2">Alokasi Formula</th>
                </tr>
                <tr ng-if="indexCtrl.region.Type >= 2">
                    <th class="money">Jumlah</th>
                    <th class="money">Rasio</th>
                    <th class="money">Bobot</th>
                    <th class="money">Jumlah</th>
                    <th class="money">Rasio</th>
                    <th class="money">Bobot</th>
                    <th class="money">Luas</th>
                    <th class="money">Rasio</th>
                    <th class="money">Bobot</th>
                    <th class="money">IKG</th>
                    <th class="money">Rasio</th>
                    <th class="money">Bobot</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="entity in entities" ng-if="indexCtrl.region.Type < 2">
                    <td>
                        <a href="#" ng-click="indexCtrl.changeRegion(entity.RegionID, $event)">
                            {{entity.RegionName}}
                        </a>
                    </td>
                    <td class="money"> {{entity.BudgetedIncome * 10 | number:0}} </td>
                    <td class="money"> {{entity.BudgetedIncome * 1 | number:0}} </td>
                    <td class="money"> {{entity.BudgetedIncome * 9 | number:0}} </td>
                    <td class="money"> {{entity.BudgetedIncome | number:0}}</td>
                    <td class="money"> {{10 | number:0}} </td>
                    <td class="money"> {{entity.TotalVillage | number:0}} </td>
                    <td class="money"> {{entity.BudgetedIncome / entity.TotalVillage | number:0}} </td>
                </tr>
                <tr ng-repeat="entity in entities" ng-if="indexCtrl.region.Type >= 2">
                    <td>
                        <a href="#" ng-click="indexCtrl.changeRegion(entity.RegionID, $event)">
                            {{entity.RegionName}}
                        </a>
                    </td>
                    <td class="money"> {{entity.BudgetedIncome  * 0.9| number:0}}</td>
                    <td class="money"> {{entity.TotalVillage * 100000 | number:0}} </td>
                    <td class="money"> {{entity.TotalVillage / total.TotalVillage | number:2}} </td>
                    <td class="money"> {{entity.TotalVillage / total.TotalVillage * 4 | number:2}} </td>
                    <td class="money"> {{entity.TotalVillage * 1000 | number:0}} </td>
                    <td class="money"> {{entity.TotalVillage / total.TotalVillage | number:2}} </td>
                    <td class="money"> {{entity.TotalVillage / total.TotalVillage * 4 | number:2}} </td>
                    <td class="money"> {{entity.TotalVillage * 100000 | number:0}} </td>
                    <td class="money"> {{entity.TotalVillage / total.TotalVillage | number:2}} </td>
                    <td class="money"> {{entity.TotalVillage / total.TotalVillage * 4 | number:2}} </td>
                    <td class="money"> {{entity.TotalVillage * 100000 | number:0}} </td>
                    <td class="money"> {{entity.TotalVillage / total.TotalVillage | number:2}} </td>
                    <td class="money"> {{entity.TotalVillage / total.TotalVillage * 4 | number:2}} </td>
                    <td class="money"> {{entity.TotalVillage / total.TotalVillage * 12 | number:2}} </td>
                    <td class="money"> {{entity.BudgetedIncome * 0.1 | number:0}} </td>
                    <td class="money"> {{entity.BudgetedIncome | number:0}} </td>
                </tr>
            </tbody>

            <tfoot ng-show="entities.length > 0">
                <tr class="success" ng-if="indexCtrl.region.Type < 2">
                    <td><a href="">Total</a></td>
                    <td class="money"> {{total.BudgetedIncome * 10 | number:0}} </td>
                    <td class="money"> {{total.BudgetedIncome * 1 | number:0}} </td>
                    <td class="money"> {{total.BudgetedIncome * 9 | number:0}} </td>
                    <td class="money"> {{total.BudgetedIncome | number:0}}</td>
                    <td class="money"> {{10 | number:0}} </td>
                    <td class="money"> {{total.TotalVillage | number:0}} </td>
                    <td class="money"> {{total.BudgetedIncome / total.TotalVillage | number:0}} </td>
                </tr>
            </tfoot>

            <tfoot ng-show="entities.length == 0">
                <tr>
                    <td colspan="6" style="padding: 10px 5px; text-align: center;">Memuat data...</td>
                </tr>
            </tfoot>

        </table>
    </div>
    <div class="container-fluid well help">
        <ul>
        </ul>
    </div>
</div>