<div ng-controller="APBDesCtrl as apbdesCtrl" ng-if="indexCtrl.region.Type == 4">
    <div ng-repeat="rootAccount in apbdesCtrl.rootAccounts">
        <div class="content-header">
            {{rootAccount.Code}}. {{rootAccount.Name}} Desa

        </div>

        <div class="table-responsive">
            <table class="table table-condensed table-responsive table-bordered">
                <thead>
                    <tr>
                        <th style="text-align: center;">Kode Anggaran</th>
                        <th style="text-align: center;">Nama Anggaran</th>
                        <th style="text-align: center;">Target</th>
                        <th style="text-align: center;">Realisasi</th>
                        <th style="text-align: center;">% Realisasi</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="account in rootAccount.ChildAccounts" ng-class="{ 'account-head' : account.ParentAccount.fkParentAccountID == null, 'account-tab' : account.ParentAccount.fkParentAccountID != null }">
                        <td>
                            <a href=" #" ng-click="">
                                {{account.Code}}
                            </a>
                        </td>
                        <td>
                            <a href="#" ng-click="">
                                {{account.Name}}
                            </a>
                        </td>

                        <td class="money"> {{( account.Target | number:0 ) || "0"}} </td>
                        <td class="money"> {{0 | number:0}} </td>
                        <td class="money"> {{0 | number:0}} </td>
                    </tr>
                    <tr ng-repeat="newAccount in apbdesCtrl.newAccounts[rootAccount.ID]">
                        <td>
                            <input type="text" placeholder="Kode" ng-model="newAccount.Code"/>
                            <span ng-if="apbdesCtrl.formErrors[$index].Code" style="color:red">
                                {{apbdesCtrl.formErrors[$index].Code}}
                            </span>
                        </td>
                        <td>
                            <input type="text" placeholder="Nama" ng-model="newAccount.Name" />
                            <span ng-if="apbdesCtrl.formErrors[$index].Name" style="color:red">
                                {{apbdesCtrl.formErrors[$index].Name}}
                            </span>
                        </td>
                        <td colspan="3">
                            <input type="number" placeholder="Target" ng-model="newAccount.Target" />
                            <span ng-if="apbdesCtrl.formErrors[$index].Target" style="color:red">
                                {{apbdesCtrl.formErrors[$index].Target}}
                            </span>
                        </td>
                    </tr>
                    <tr class="" ng-if="indexCtrl.isInRoleAndScope('volunteer_account', entity.RegionID)">
                        <td colspan="5">
                            <button class="btn btn-xs"
                                    ng-click="apbdesCtrl.addNewAccount(rootAccount.ID)">
                                Tambah {{rootAccount.Name}}
                            </button>
                        </td>
                    </tr>
                    <tr class="" ng-if="indexCtrl.isInRoleAndScope('volunteer_account', entity.RegionID)">
                        <td colspan="2">
                            <button class="btn btn-primary btn-xs"
                                    ng-click="apbdesCtrl.saveNewAccounts(rootAccount.ID)">
                                Simpan
                            </button>
                            <span ng-if="">Menyimpan</span>
                        </td>
                    </tr>
                </tbody>
                <tfoot ng-show="rootAccount.ChildAccounts.length > 0">
                    <tr class="success">
                        <td colspan="2"><a href="">Total</a></td>
                        <td class="money"> {{(total.RealizedIncome | number:0) || "0"}} </td>
                        <td class="money"> {{(total.BudgetedExpense | number:0) || "0"}} </td>
                        <td class="money"> {{(total.RealizedExpense | number:0) || "0"}} </td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>
