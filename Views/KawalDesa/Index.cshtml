@{
    Layout = "_Layout.cshtml";
}


@Html.Partial("TransferRecapitulation")
@Html.Partial("AccountRecapitulation")
@Html.Partial("DdAllocation")
@Html.Partial("AddAllocation")
@Html.Partial("BhprAllocation")
@Html.Partial("Apbdes")

<div class="modal fade" id="document-upload-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" ng-show="indexCtrl.newUploadState">
            <div class="modal-body">
                <div class="container-fluid">
                    Mengunggah...
                </div>
            </div>
        </div>
        <div class="modal-content" ng-show="!indexCtrl.newUploadState">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Unggah Dokumen</h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label for="name" class="col-sm-2 control-label">Nama</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" ng-model="indexCtrl.newUpload.DocumentName" placeholder="Nama dokumen resmi, cth: PMK No 24 tahun 2014" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="name" class="col-sm-2 control-label">Sumber</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" ng-model="indexCtrl.newUpload.Source" placeholder="URL sumber, bila ada" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="name" class="col-sm-2 control-label">Keterangan</label>
                            <div class="col-sm-10">
                                <textarea class="form-control" ng-model="indexCtrl.newUpload.Notes" rows=" 3"></textarea>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="picture" class="col-sm-2 control-label">File</label>
                            <div class="col-sm-10">
                                <input type="file" ng-file-select class="form-control"
                                       ng-model="indexCtrl.newUploadFile" />
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <div class="pull-left">
                    <a href="/api/Spreadsheet/GetTemplate?regionId={{indexCtrl.activeUploadRegionId}}&type={{indexCtrl.activeUploadType}}&apbnKey=2015p">Unduh template terbaru</a>
                </div>

                <div>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" ng-click="indexCtrl.upload()">Unggah</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="source-upload-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content" ng-show="indexCtrl.newSourceState">
            <div class="modal-body">
                <div class="container-fluid">
                    Mengunggah...
                </div>
            </div>
        </div>
        <div class="modal-content" ng-show="!indexCtrl.newSourceState">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">
                    Unggah Dokumen Sumber
                </h4>
            </div>
            <div class="modal-body">
                <div class="container-fluid">
                    <form class="form-horizontal">
                        <div class="form-group">
                            <label for="function" class="col-sm-3 control-label">Fungsi Dokumen</label>
                            <div class="col-sm-9">
                                <select class="form-control" name="function" ng-model="indexCtrl.newSourceFunction">
                                    <option value="0">Alokasi</option>
                                    <option value="1">Penyaluran</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="function" class="col-sm-3 control-label">Jenis Dana</label>
                            <div class="col-sm-9">
                                <select class="form-control" name="type" ng-model="indexCtrl.newSourceSubType">
                                    <option value="Dd">Dana Desa dari APBN</option>
                                    <option value="Add">ADD dari APBD</option>
                                    <option value="Bhpr">Bagi Hasil Pajak &amp; Retribusi</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="name" class="col-sm-3 control-label">Wilayah</label>
                            <div class="col-sm-9">
                                <input type="text" ng-model="indexCtrl.newSourceRegion" placeholder="Cari desa, kecamatan, kabupaten, atau propinsi"
                                       typeahead="region as region.Name for region in indexCtrl.searchRegions($viewValue)" typeahead-template-url="searchTemplate.html" class="form-control" />
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="picture" class="col-sm-3 control-label">File</label>
                            <div class="col-sm-9">
                                <input type="file" ng-file-select class="form-control"
                                       ng-model="indexCtrl.newSourceFile" multiple="" />
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <div>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-primary" ng-click="indexCtrl.uploadSource()">Unggah</button>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="btn-floating-container" ng-if="indexCtrl.hasAnyVolunteerRoles()">
    <a href="#" class="btn btn-primary" ng-click="indexCtrl.modal('#source-upload-modal')">
        <i class="fa fa-upload"></i>
    </a>
</div>
